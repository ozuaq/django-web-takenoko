{% extends "api_app/base.html" %}

{% block title %}アカウント登録{% endblock title %}
{% block content %}
<h3>ログイン</h3>

{% if messages.error %}

{% endif %}
{% if messages %}
<ul class="list-group">
    {% for message in messages %}
    <li class="list-group-item list-group-item-danger">{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
<div id="message">
    Message: [[ message ]]
</div>
<button v-on:click="addUser">Reverse Message</button>
{% endblock content %}
{% block script %}
<script>
    const SignUp = {
        data() {
            message: ''
        },
        methods() {
            create: {
                axios.post("http://localhost/api/user/", {
                username: 'kurakura',
                password: 'dddddtstone'
             })
                .then(function (response) {
                    this.message = response.username
                    console.log(response);
                    console.log(response.username)
                })
                .catch(function (error) {
                    this.message = 'すでに登録されているユーザか入力情報に誤りがあります'
                    console.log(error);
                });

            }
           
        },
        delimiters: ['[[', ']]']
    }

    Vue.createApp(
        SignUp
    ).mount('#message')
</script>
{% endblock script %}